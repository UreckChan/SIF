<HTML><!-- Start of <HEAD> Code Block -->
	<HEAD>
<!-- Inserted by TRADOS: -->
<META HTTP-EQUIV="content-type" CONTENT="text/html; charset=UTF-8">

<!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">

<!-- JavaScript Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8" crossorigin="anonymous"></script>


<title>SUSTAINABLE AN INTELLIGENT FARM</title>
<!-- Start of <style> Code Block  
	Styles make it easier to change the way the page looks.
	Definitions shown below are applied to elements in the page.
	Because the names of the elements are unique, they can also be used
	as a reference in the code block.
	-->
	<style>
	body {
		margin:0px;
		background-color: black;
	}
	h1 {
		
		position: relative;
		font-size: 20px;
		font-weight: bold;
		font-family: helvetica;
		margin-left:auto;
		margin-right:auto;
	  }
	h2 {
		
		position: relative;
		font-size: 17px;
		font-weight: bold;
		font-family: helvetica;
		margin-left:auto;
		margin-right:auto;

	}
	#app {
		width:100%;
		height:100%;
		top:0px;
		margin:0px;
		color: #bbbbbb;
		background-image:url('fondo.jpg');
		background-size: cover;
		background-position:center;
		background-color: black;
		border: 1px solid black;	
	}
	.text {
		width: 55%;
		position: relative;
		font-size: 15px;
		font-weight: bold;
		font-family: helvetica;
		background-color: black;
		margin-left:auto;
		margin-right:auto;
		margin-top: 5px;
		margin-bottom: 5px;
		padding: 10px;
		border: 1px solid #bbbbbb;
	  }
	 #logAreaTitle {
		width: 75%;
		position: relative;
		font-family: Helvetica;
		font-size: 12px;
		font-weight: bold;
		margin-top: 15px;
		margin-bottom: 0px;
		margin-left:auto;
		margin-right:auto;
	}
	#logArea {
		width: 75%;
		position: relative;
		border: 1px solid #bbbbbb;
		font-family: verdana;
		padding: 10px;
		font-size: 12px;
		background-color: black;
		margin-top: 0px;
		margin-bottom: 0px;
		margin-left:auto;
		margin-right:auto;
	}
	</style><!-- End of <style> Code Block -->
		<!-- Start of <script> Code Block
	This is where the actual program logic is placed.
	Notice that no part of this section is displayed on the screen.
	The page can be dynamically changed by this code.
	-->
	<SCRIPT>
		// Start of variable declaration block
		var rTempHi, rTempLo, rMovHi, rMovLo, rMoistHi, rMoistLo, temp, mov, moist = 0;
		var fakeValuesToggle = false;
		var interval;
		var log = [];
		var lastWeekAverages = [
		[75, 0, 10],
		[77, 1, 9],
		[79, 1, 6],
		[80, 0, 4],
		[80, 0, 3],
		[76, 1, 6],
		[74, 0, 9],
		[70, 1, 11],
		];
		var currDay = 0;
		var lookingBack = false;
		var weatherGuy = 0;

		var date = new Date();
		// End of variable declaration block
		
		
		/* The init() function is the first function to run.
		It sets up function execution intervals and initializes 
		the extreme values, such as high and low temperatures. */
		function init() {
			shortInterval = window.setInterval("fakeValues()",3000);
			longInterval = window.setInterval("resetExtremes();",60000);
			resetExtremes();
			console.log("Today's time and date: "+date.getMonth()+1+"-"+date.getDate()+"-"+date.getFullYear()+" "+date.getHours()+":"+date.getMinutes()+":"+date.getSeconds());
		}

		/* The resetExtremes() function calculates extreme 
		values (highs and lows) for temperature, moisture and 
		sunlight. These extremes are fed into the random number 
		generator which then calculates a random value within 
		these extremes. */
		function resetExtremes() {
			/* The weatherGuy variable is used to count up to a storm. 
			It is incremented every time this line is executed.
			When it reaches 3, the code simulates a storm. */
			weatherGuy += 1; 
			console.log("resetting extremes...");
			rTempHi = Math.floor(Math.random() * (80 - 76 + 1)) + 76;
			rTempLo = Math.floor(Math.random() * (80 - 75 + 1)) + 75;
			while ((rTempLo > rTempHi) || (rTempLo == rTempHi)) { // If the random value is out of range, calculate a new one.
				rTempLo = Math.floor(Math.random() * (80 - 75 + 1)) + 75;
			}
			rMoistHi = Math.floor((Math.random() * 25) + 2);
			rMoistLo = Math.floor((Math.random() * 25) + 1);
			while ((rMoistLo > rMoistHi) || (rMoistLo == rMoistHi)) { // If the random value is out of range, calculate a new one.
				rMoistLo = Math.floor((Math.random() * 25) + 1);
			}
			rMovHi = Math.floor((Math.random() * 2) + 1);;
			rMovLo = Math.floor((Math.random() * 2) );
			while ((rMovLo > rMovHi) || (rMovLo == rMovHi)) { // If the random value is out of range, calculate a new one.
				rMovLo = Math.floor((Math.random() * 2));
			}
			if (weatherGuy > 2){
				/* This if/then structure simulates a storm when 
				the weatherGuy variable is 3. The extreme values 
				are then set to represent storm conditions. The 
				weatherGuy variable is reset to 0 and an alert 
				message is displayed. */
				rTempHi  = 55;
				rTempLo  = 50;
				rMovHi   = 1;
				rMovLo   = 0;
				rMoistHi = 32;
				rMoistLo = 30;
				weatherGuy = 0;
				log.push(date.getMonth()+1+"-"+date.getDate()+"-"+date.getFullYear()+" "+date.getHours()+":"+date.getMinutes()+":"+date.getSeconds()+"Alerta gran tormenta!!!<br>");
			}
			console.log("Temperatura nueva High/Low: "+rTempHi+"/"+rTempLo);
			console.log("Movimiento nuevo High/Low: "+rMovHi+"/"+rMovLo);
			console.log("Humedad nueva High/Low: "+rMoistHi+"/"+rMoistLo);
			return;
		}

		// The prepareToggle() function allows the user to toggle between real and simulated data.
		function prepareToggle() {
			currDay = 0;
			window.clearInterval(shortInterval);
			showPastDaysAvgs();
			/* This if/else structure uses value of the fakeValuesToggle variable 
			to determine whether to show real values or simulated values. */
			if (fakeValuesToggle == true) { 
			    /* If the value is true, the toggleBTN button displays the name "Show Real Values" and then the fakeValues() function runs every 3 seconds*/
				document.getElementById('toggleBTN').innerHTML = 'Mostrar datos reales'; // The toggleBTN button displays "Show Real Values".
				document.getElementById('logArea').innerHTML = 'Conectando con los sensores... Por favor espera.';
				shortInterval = window.setInterval("fakeValues()",3000); // Runs the fakeValues() function every 3 seconds.
			} else {
				/* If fakeValuesToggle is not true, the "toggleBTN" button displays the 
				name "Show Simulated Data". It stops the periodic execution of the fakeValues() 
				function and displays "No sensor data available" for sensor values.*/
				document.getElementById('toggleBTN').innerHTML = 'Mostrar datos simulados'; // The toggleBTN button displays "Show simulated Data".
				window.clearInterval(shortInterval); // Clear the periodic execution of the fakeValues() function.
				// The next four lines set the HTML to display "No sensor data available" for sensor values.
				document.getElementById('logArea').innerHTML = 'No se encontraron Sensores.'; 
				document.getElementById("tempValue").innerHTML = "No hay datos disponibles del sensor.";
				document.getElementById("movValue").innerHTML  = "No hay datos disponibles del sensor.";
				document.getElementById("moistValue").innerHTML= "No hay datos disponibles del sensor.";
			  }
			fakeValuesToggle=!fakeValuesToggle;
			return;
		
		}
	
		/* The fakeValues() function simulates sensor data by calculating 
		random numbers. It uses the high and low values defined in the 
		resetExtremes() function above. */
		function fakeValues() { 
		  /* This if/else loop first tests to ensure that the user is 
		  looking at simulated values for today. It does so by checking 
		  the lookingBack variable. If the lookingBack variable is set to 
		  not true, then the user is looking at today's simulated values.*/
		  if (!lookingBack) { /* If !lookingBack, which means that 
		  lookingBack is not true, then the code calculates random 
		  values for variables temp, sun, and moist. The value of these 
		  variables is then displayed. */
			document.getElementById("logArea").innerHTML = "";
			temp = Math.floor(Math.random() * (rTempHi - rTempLo + 1)) + rTempLo;
			mov = Math.floor(Math.random() * 2);
			moist = Math.floor((Math.random() * rMoistHi) + rMoistLo);
			document.getElementById("tempValue").innerHTML =  temp + " F";
			document.getElementById("movValue").innerHTML  =  mov ;
			document.getElementById("moistValue").innerHTML= moist;
			/* The following if/then structures determine 
			whether or not a WARNING message should display */
			if (temp < 77) { // If temperature drops below 77F, display WARNING message.
				log.push(date.getMonth()+1+"-"+date.getDate()+"-"+date.getFullYear()+" "+date.getHours()+":"+date.getMinutes()+":"+date.getSeconds()+" WARNING: La temperatura del campo cayó por debajo de 77F.  Current Value: "+temp+"F<br>");
			}
			if (mov > 0) { // If mov expose to moviment, display WARNING message.
				log.push(date.getMonth()+1+"-"+date.getDate()+"-"+date.getFullYear()+" "+date.getHours()+":"+date.getMinutes()+":"+date.getSeconds()+" WARNING: Se detecto movimiento. Current Value: "+mov+"<br>");
			}
			if (moist <5) { // If moisture is below 5...
				log.push(date.getMonth()+1+"-"+date.getDate()+"-"+date.getFullYear()+" "+date.getHours()+":"+date.getMinutes()+":"+date.getSeconds()+" WARNING: El nivel de humedad del campo está por debajo 5. Current Value: "+moist+"<br>");
			} else if (moist > 20) { // ...or above 20, display WARNING message.
				log.push(date.getMonth()+1+"-"+date.getDate()+"-"+date.getFullYear()+" "+date.getHours()+":"+date.getMinutes()+":"+date.getSeconds()+" WARNING: El nivel de humedad del campo está por encima 20.  Current Value: "+moist+"<br>");
			  }
			// This if structure allows the log messages to scroll when more than 10 messages are displayed.
			if (log.length > 10) { 
				var j = log.length - 10;
				for (j;j>0;j--) {
					log.shift();
				}
			}
			for (var i=0;i<log.length;i++ ) {
				document.getElementById("logArea").innerHTML += log[i];
			}
		  }
		}
		
		/* The dayOfWeek(d) function maps the variable d to a 
		weekday name using the following values:
		sun=0; mon=1; tue=2; wed=3; thu=4; fri=5; sat=6. 
		The variable weekDay is declared to assign the 
		weekday value in the switch+case structure.		*/
		function dayOfWeek(d) {
		  var weekDay = "";
		  /* The switch+case structure manipulates 
		  variables that can assume specific values. In this 
		  example, d can switch case between 0 and 6, representing 
		  weekdays. The break command causes the dayOfWeek 
		  function to terminate when the value of d is located. 
		  The program "breaks" to the next line of code, which 
		  is the console.log() function. */
		  switch(d) {
			case 0:
			  weekDay = "Domingo"; 
			  break;
			case 1:
			  weekDay = "Lunes"; 
			  break;
			case 2:
			  weekDay = "Martes"; 
			  break;
			case 3:
			  weekDay = "Miercoles";
			  break;
			case 4:
			  weekDay = "Jueves"; 
			  break;
			case 5:
			  weekDay = "Viernes"; 
			  break;
			case 6:
			  weekDay = "Sabado";
			  break;
		  }
		  console.log(currDay+","+d+","+weekDay);
		  return weekDay;
		}

		/* The showPastDaysAvgs() function calculates yesterday's weekday. */
		function showPastDaysAvgs(c) {
		  if (c == "nDay") currDay += 1;
		  if (c == "pDay") currDay -= 1;
		   /* This if structure limits the user to viewing only the 
		   last 7 days of historical data. If currDay is <= -6, then 
		   the pDay or Previous Day button is disabled. If the currDay 
		   is >= 0, then the nDay or Next Day button is disabled. */  
		  if ((currDay > -7) && (currDay < 0)) { 
		   	lookingBack = true; // When true, this variable indicates that the user is currently looking at a day in the past.
			var day = (((date.getDay()+currDay)+7)%7); // The current day is calculated and stored in the variable day.
			// This line displays the value of the dayOfWeek() function.
			document.getElementById("dayValue").innerHTML = dayOfWeek(day); 
			// This line enables the pDay or Previous Day button.
   			document.getElementById("pDay").disabled = false; 
			// This line enables the nDay or Next Day button.
   			document.getElementById("nDay").disabled = false; 
			// This lines displays the average temperature value for the day.
			document.getElementById("tempValue").innerHTML = lastWeekAverages[lastWeekAverages.length+currDay][0]  + " F"; 
			//This line displays the average light value for the day.
			document.getElementById("movValue").innerHTML  = lastWeekAverages[lastWeekAverages.length+currDay][1] ; 
			//This line displays the average moisture value for the day.
			document.getElementById("moistValue").innerHTML= lastWeekAverages[lastWeekAverages.length+currDay][2]; 
		  }
		  if (currDay >= 0) {
			lookingBack = false;
			document.getElementById("pDay").disabled = false; // This line enables the pDay or Previous Day button.
			document.getElementById("nDay").disabled = true;  // This line disables the nDay or Next Day button.
			// This line is calculating the current date.
			document.getElementById("dayValue").innerHTML = "Today, "+(date.getMonth()+1)+"-"+date.getDate()+"-"+date.getFullYear();
		  }
		  if (currDay <= -6) {
			document.getElementById("pDay").disabled = true;  // This line disables the pDay or Previous Day button.
			document.getElementById("nDay").disabled = false; // This line enables the nDay or Next Day button.
		  }
		}
	</SCRIPT><!-- End of <script> Code Block -->

	</HEAD><!-- End of <HEAD> Code Block -->
<!-- Start of <BODY> Code Block The following HTML code displays the web page. The behavior of the displayed page is modified by the code in the <script> code block.-->
	<BODY onload="init();">


		<nav class="navbar navbar-expand-lg bg-dark navbar-dark">
			<div class="container-fluid">
			  <img src="sif.png"  height="100">
			  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			  </button>
			  <div class="collapse navbar-collapse" id="navbarSupportedContent">
				<ul class="navbar-nav me-auto mb-2 mb-lg-0">
				  <li class="nav-item">
					<a class="nav-link active" aria-current="page" href="#">Home</a>
				  </li>
				  <li class="nav-item">
					<a class="nav-link" href="#">Contactos</a>
					<li class="nav-item">
					  <a class="nav-link" href="#">Iniciar Sesion</a>
					</li>
				  </li>
				</ul>
				<p class="text-muted"><H1 class="text-muted">SUSTAINABLE AN INTELLIGENT FARM</H1></p>

			  </div>
			</div>
		  </nav>



	<DIV id="app">
	<CENTER><H1 class="text-light">Interfaz web de seguimiento de granja</H1></CENTER>
	<br>
	<center>
		<button class="btn btn-success" id="pDay" type="button" onclick="showPastDaysAvgs(this.id);">Valores medios del Dia anterior</button>
		<button class="btn btn-primary" id="nDay" disabled="true" type="button" onclick="showPastDaysAvgs(this.id);">Valores medios del Dia anterior</button>
		<button class="btn btn-info" id="toggleBTN" type="button" onclick="prepareToggle();">Valores en tiempo real</button>
	</center>
	<DIV class="text">Dia:<span id="dayValue" style="width:1000px;"> Dia</DIV>
	<DIV class="text">Temperatura:<span id="tempValue" style="width:1000px;"> No hay datos de sensores disponibles.</DIV>
	<DIV class="text">Movimiento:<span id="movValue"> No hay datos de sensores disponibles.	</DIV>
	<DIV class="text">Humedad:<span id="moistValue"> No hay datos de sensores disponibles.	</DIV>
	<DIV id="logAreaTitle" class="text-light"><h1>Datos:</h1></DIV>
	<DIV id="logArea">Conectando a los sensores… Espere.</DIV>		
	</DIV>
</BODY><!-- End of <BODY> Code Block -->

</HTML>